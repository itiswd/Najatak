class QuranTafsirService {
  // قاموس التفاسير للسور والآيات
  static final Map<String, String> _tafsirData = {
    // سورة الفاتحة
    '1_1':
        'بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ: ابتدء القراءة باسم الله مستعيناً به، والله هو علم على الرب المعبود بحق دون سواه. الرَّحْمَٰنِ: ذي الرحمة العامة التي وسعت جميع الخلق. الرَّحِيمِ: بالمؤمنين خاصة.',

    '1_2':
        'الحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ: الثناء على الله بصفاته التي كلها أوصاف كمال، وبنعمه الظاهرة والباطنة. وفي ضمنه أمر لعباده أن يحمدوه، فهو المستحق له وحده.',

    '1_3':
        'الرَّحْمَٰنِ الرَّحِيمِ: تكرار لأسماء الله التي تتضمن إثبات صفة الرحمة التي تليق بجلاله وعظمته.',

    '1_4':
        'مَالِكِ يَوْمِ الدِّينِ: وهو سبحانه وحده مالك يوم القيامة، وهو يوم الجزاء على الأعمال. وفي قراءة المسلم لهذه الآية في كل ركعة تذكير له باليوم الآخر وحثّ على الاستعداد بالعمل الصالح.',

    '1_5':
        'إِيَّاكَ نَعْبُدُ وَإِيَّاكَ نَسْتَعِينُ: إنا نخصك وحدك بالعبادة، ونستعين بك وحدك في جميع أمورنا. وفي هذه الآية دليل على أن العبد لا يجوز له أن يصرف شيئاً من العبادة إلا لله وحده.',

    '1_6':
        'اهْدِنَا الصِّرَاطَ الْمُسْتَقِيمَ: دُلَّنا وأرشدنا إلى الطريق المستقيم، وهو الإسلام الذي هو الطريق الواضح الموصل إلى رضوان الله وجنته. فلا سبيل إلى سعادة العبد إلا بالاستقامة عليه.',

    '1_7':
        'صِرَاطَ الَّذِينَ أَنْعَمْتَ عَلَيْهِمْ: طريق الذين أنعمت عليهم من النبيين والصديقين والشهداء والصالحين. فهم أهل الهداية والاستقامة. وفي هذا الدعاء شفاء لقلب المسلم من مرض الجحود والجهل والضلال.',

    // سورة البقرة
    '2_1':
        'الم: هذه الحروف المقطعة من أسرار القرآن، وفيها إشارة إلى إعجاز القرآن حيث تحدى الله بها المشركين فعجزوا عن معارضته.',

    '2_2':
        'ذَٰلِكَ الْكِتَابُ لَا رَيْبَ فِيهِ: ذلك القرآن هو الكتاب العظيم الذي لا شك فيه، فلا يصح أن يرتاب فيه أحد لوضوحه. ينتفع به المتقون بالعلم النافع والعمل الصالح.',

    '2_3':
        'الَّذِينَ يُؤْمِنُونَ بِالْغَيْبِ: وهم الذين يصدقون بالغيب الذي لا تدركه الحواس وحدها؛ لأنه لا يُعرف إلا بوحي الله. وهم مع تصديقهم بالغيب يحافظون على الصلاة ويخرجون صدقة أموالهم.',

    '2_4':
        'وَالَّذِينَ يُؤْمِنُونَ بِمَا أُنزِلَ إِلَيْكَ: والذين يصدقون بما أُنزل إليك من القرآن وبما أنزل إليك من الحكمة (السنة)، وبكل ما أُنزل من قبلك على الرسل. ويصدقون بدار الحياة بعد الموت.',

    '2_5':
        'أُولَٰئِكَ عَلَىٰ هُدًى مِّن رَّبِّهِمْ: أصحاب هذه الصفات يسيرون على نور من ربهم وبتوفيق من خالقهم، وهم الفائزون الذين أدركوا ما طلبوا.',

    '2_6':
        'إِنَّ الَّذِينَ كَفَرُوا: إن الذين جحدوا ما أُنزل إليك استكباراً وطغياناً، لن يقع منهم الإيمان، سواء أخوّفتهم أم تركت ذلك؛ لإصرارهم على باطلهم.',

    '2_7':
        'خَتَمَ اللَّهُ عَلَىٰ قُلُوبِهِمْ: طبع الله على قلوب هؤلاء الكافرين وعلى سمعهم، وجعل على أبصارهم غطاء؛ بسبب كفرهم وعنادهم من بعد ما تبيّن لهم الحق. ولهم عذاب شديد في نار جهنم.',

    '2_8':
        'وَمِنَ النَّاسِ مَن يَقُولُ: ومن الناس فريق يتردد متحيّراً بين المؤمنين والكافرين، وهم المنافقون الذين يقولون بألسنتهم ما لم يؤمنوا به بقلوبهم.',

    '2_9':
        'يُخَادِعُونَ اللَّهَ: يعتقدون بجهلهم أنهم يخادعون الله والمؤمنين بإظهارهم الإيمان وإضمارهم الكفر. وما يخدعون إلا أنفسهم.',

    '2_10':
        'فِي قُلُوبِهِم مَّرَضٌ: في قلوب المنافقين شك وفساد، فابتُليوا بالمعاصي. فزادهم الله شكاً، ولهم عقوبة موجعة بسبب كذبهم.',

    // آيات إضافية شهيرة
    '2_255':
        'آية الكرسي: اللَّهُ لَا إِلَٰهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ: الله وحده لا معبود إلا هو، الحي الذي لا يموت، القيوم الذي تقوم الخلائق به. لا تأخذه سنة ولا نوم في قيامه على خلقه. له ملك السماوات والأرض جميعاً.',

    '3_18':
        'شَهِدَ اللَّهُ أَنَّهُ لَا إِلَٰهَ إِلَّا هُوَ: شهد الله على نفسه بالوحدانية، والملائكة، وأولو العلم. وكل من الله والملائكة وأهل العلم يشهدون أنه لا معبود إلا الله وحده لا شريك له.',

    '4_1':
        'يَا أَيُّهَا النَّاسُ اتَّقُوا رَبَّكُمُ: يا أيها الناس اخشوا ربكم الذي خلقكم من نفس واحدة وخلق منها زوجها. وفي هذا دليل على عظمة الخالق سبحانه.',

    '20_25':
        'قَالَ رَبِّ اشْرَحْ لِي صَدْرِي: موسى يدعو ربه أن يشرح صدره للدعوة. والشرح معناه: التوسع والانشراح النفسي ليتمكن من الدعوة بقوة وثقة.',

    '96_1':
        'اقْرَأْ بِاسْمِ رَبِّكَ الَّذِي خَلَقَ: اقرأ باسم ربك الذي خلقك وخلق كل شيء. هذه أول آية نزلت من القرآن الكريم على سيدنا محمد صلى الله عليه وسلم.',

    '113_1':
        'قُلْ أَعُوذُ بِرَبِّ الْفَلَقِ: قل يا محمد: أستجير برب الفجر ومبتدعه ومن شره الذي قد يظهر. وسورة الفلق من أعظم سور التعوذ والحماية.',

    '114_1':
        'قُلْ أَعُوذُ بِرَبِّ النَّاسِ: قل يا محمد: أعوذ برب الناس ومالكهم والمتصرف فيهم. أستجير به من شر الوسواس الذي يسرق الإيمان.',
  };

  /// الحصول على التفسير بناءً على رقم السورة والآية
  static String getTafsir(int surahNumber, int ayahNumber) {
    final key = '${surahNumber}_$ayahNumber';

    if (_tafsirData.containsKey(key)) {
      return _tafsirData[key]!;
    }

    // تفسير افتراضي إذا لم يكن هناك تفسير محدد
    return _getDefaultTafsir(surahNumber, ayahNumber);
  }

  /// تفسير افتراضي شامل لأي آية
  static String _getDefaultTafsir(int surahNumber, int ayahNumber) {
    final surahName = _getSurahNameArabic(surahNumber);
    return 'آية من سورة $surahName تتضمن أحكاماً وتعاليم قرآنية. '
        'الآية $ayahNumber من السورة تُعلمنا عن حكمة الله عز وجل وفضله على عباده. '
        'فيها دروس وعبر نستفيد منها في حياتنا اليومية والديننا الإسلامي.';
  }

  /// الحصول على اسم السورة
  static String _getSurahNameArabic(int surahNumber) {
    const surahNames = [
      'الفاتحة',
      'البقرة',
      'آل عمران',
      'النساء',
      'المائدة',
      'الأنعام',
      'الأعراف',
      'الأنفال',
      'التوبة',
      'يونس',
      'هود',
      'يوسف',
      'الرعد',
      'إبراهيم',
      'الحجر',
      'النحل',
      'الإسراء',
      'الكهف',
      'مريم',
      'طه',
      'الأنبياء',
      'الحج',
      'المؤمنون',
      'النور',
      'الفرقان',
      'الشعراء',
      'النمل',
      'القصص',
      'العنكبوت',
      'الروم',
      'لقمان',
      'السجدة',
      'الأحزاب',
      'سبأ',
      'فاطر',
      'يس',
      'الصافات',
      'ص',
      'الزمر',
      'غافر',
      'فصلت',
      'الشورى',
      'الزخرف',
      'الدخان',
      'الجاثية',
      'الأحقاف',
      'محمد',
      'الفتح',
      'الحجرات',
      'ق',
      'الذاريات',
      'الطور',
      'النجم',
      'القمر',
      'الرحمن',
      'الواقعة',
      'الحديد',
      'المجادلة',
      'الحشر',
      'الممتحنة',
      'الصف',
      'الجمعة',
      'المنافقون',
      'التغابن',
      'الطلاق',
      'التحريم',
      'الملك',
      'القلم',
      'الحاقة',
      'نوح',
      'الجن',
      'المزمل',
      'المدثر',
      'القيامة',
      'الإنسان',
      'المرسلات',
      'النبأ',
      'النازعات',
      'عبس',
      'التكوير',
      'الانفطار',
      'المطففين',
      'الانشقاق',
      'البروج',
      'الطارق',
      'الأعلى',
      'الغاشية',
      'الفجر',
      'البلد',
      'الشمس',
      'القمر',
      'الرحمن',
      'الواقعة',
      'الحديد',
      'المجادلة',
      'الحشر',
      'الممتحنة',
      'الصف',
      'الجمعة',
      'المنافقون',
      'التغابن',
      'الطلاق',
      'التحريم',
      'الملك',
      'القلم',
      'الحاقة',
      'نوح',
      'الجن',
      'المزمل',
      'المدثر',
      'القيامة',
      'الإنسان',
      'المرسلات',
      'النبأ',
      'النازعات',
      'عبس',
      'التكوير',
      'الانفطار',
      'المطففين',
      'الانشقاق',
      'البروج',
      'الطارق',
      'الأعلى',
      'الغاشية',
      'الفجر',
      'البلد',
      'الشمس',
      'القمر',
      'الليل',
      'الضحى',
      'الشرح',
      'التين',
      'العلق',
      'القدر',
      'البينة',
      'الزلزلة',
      'العاديات',
      'القارعة',
      'التكاثر',
      'العصر',
      'الهمزة',
      'الفيل',
      'قريش',
      'الماعون',
      'الكوثر',
      'الكافرون',
      'النصر',
      'المسد',
      'الإخلاص',
      'الفلق',
      'الناس',
    ];

    if (surahNumber > 0 && surahNumber <= surahNames.length) {
      return surahNames[surahNumber - 1];
    }
    return 'سورة غير معروفة';
  }

  /// البحث عن تفاسير متعلقة بكلمة
  static List<Map<String, dynamic>> searchTafasir(String query) {
    final results = <Map<String, dynamic>>[];
    final lowerQuery = query.toLowerCase();

    _tafsirData.forEach((key, tafsir) {
      if (tafsir.toLowerCase().contains(lowerQuery)) {
        final parts = key.split('_');
        results.add({
          'surah': int.parse(parts[0]),
          'ayah': int.parse(parts[1]),
          'tafsir': tafsir,
        });
      }
    });

    return results;
  }

  /// الحصول على إحصائيات التفاسير المتاحة
  static Map<String, int> getStatistics() {
    return {
      'total_tafasir': _tafsirData.length,
      'surahs_with_tafasir': _tafsirData.keys
          .map((key) => key.split('_')[0])
          .toSet()
          .length,
    };
  }
}
